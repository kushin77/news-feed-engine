# ElevatedIQ News Feed Engine - GCP Secret Manager Configuration
# Template for required secrets - populate via gcloud CLI or Terraform

# Create secrets with the following commands:
# gcloud secrets create SECRET_NAME --replication-policy="automatic"
# echo -n "SECRET_VALUE" | gcloud secrets versions add SECRET_NAME --data-file=-

secrets:
  # YouTube Data API v3
  - name: news-feed-youtube-api-key
    description: "YouTube Data API key for video/channel discovery"
    required: true
    source: "Google Cloud Console > APIs & Services > Credentials"

  # Twitter/X API v2
  - name: news-feed-twitter-api-key
    description: "Twitter API Bearer Token or API Key"
    required: true
    source: "Twitter Developer Portal > Project > Keys and Tokens"

  - name: news-feed-twitter-api-secret
    description: "Twitter API Secret Key"
    required: true
    source: "Twitter Developer Portal > Project > Keys and Tokens"

  # Reddit API
  - name: news-feed-reddit-client-id
    description: "Reddit application client ID"
    required: true
    source: "Reddit Preferences > Apps > Create Application"

  - name: news-feed-reddit-client-secret
    description: "Reddit application client secret"
    required: true
    source: "Reddit Preferences > Apps > Create Application"

  # Claude AI (Anthropic)
  - name: news-feed-claude-api-key
    description: "Anthropic Claude API key for content analysis"
    required: true
    source: "console.anthropic.com > API Keys"

  # OpenAI (for embeddings)
  - name: news-feed-openai-api-key
    description: "OpenAI API key for text embeddings"
    required: true
    source: "platform.openai.com > API Keys"

  # ElevenLabs (voice synthesis)
  - name: news-feed-elevenlabs-api-key
    description: "ElevenLabs API key for voice synthesis"
    required: true
    source: "elevenlabs.io > Profile > API Key"

  # D-ID (avatar video)
  - name: news-feed-did-api-key
    description: "D-ID API key for avatar video generation"
    required: false
    source: "studio.d-id.com > Settings > API"

  # JWT Secret
  - name: news-feed-jwt-secret
    description: "Secret key for JWT token signing (256-bit random)"
    required: true
    generate: "openssl rand -base64 32"

---
# Terraform template for creating secrets
# terraform/modules/news-feed-secrets/main.tf

# resource "google_secret_manager_secret" "youtube_api_key" {
#   secret_id = "news-feed-youtube-api-key"
#   project   = var.project_id
#
#   labels = {
#     service     = "news-feed-engine"
#     environment = var.environment
#     managed_by  = "terraform"
#   }
#
#   replication {
#     automatic = true
#   }
# }

# resource "google_secret_manager_secret_iam_member" "youtube_api_key_access" {
#   secret_id = google_secret_manager_secret.youtube_api_key.secret_id
#   project   = var.project_id
#   role      = "roles/secretmanager.secretAccessor"
#   member    = "serviceAccount:${var.service_account_email}"
# }

---
# Shell script to create all secrets
# scripts/create-secrets.sh

#!/bin/bash
# set -e

# PROJECT_ID="${GCP_PROJECT_ID:-elevatediq-production}"
# gcloud config set project $PROJECT_ID

# Secrets to create
# SECRETS=(
#   "news-feed-youtube-api-key"
#   "news-feed-twitter-api-key"
#   "news-feed-twitter-api-secret"
#   "news-feed-reddit-client-id"
#   "news-feed-reddit-client-secret"
#   "news-feed-claude-api-key"
#   "news-feed-openai-api-key"
#   "news-feed-elevenlabs-api-key"
#   "news-feed-did-api-key"
#   "news-feed-jwt-secret"
# )

# for secret in "${SECRETS[@]}"; do
#   echo "Creating secret: $secret"
#   gcloud secrets create "$secret" --replication-policy="automatic" 2>/dev/null || true
# done

# echo "Secrets created. Add values with:"
# echo 'echo -n "VALUE" | gcloud secrets versions add SECRET_NAME --data-file=-'
